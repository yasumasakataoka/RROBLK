afterSaveCell : function(rowid,name,val,iRow,iCol) { if(name == 'amount') { var taxval = jQuery("#celltbl").jqGrid('getCell',rowid,iCol+1); jQuery("#celltbl").jqGrid('setRowData',rowid,{total:parseFloat(val)+parseFloat(taxval)}); } if(name == 'tax') { var amtval = jQuery("#celltbl").jqGrid('getCell',rowid,iCol-1); jQuery("#celltbl").jqGrid('setRowData',rowid,{total:parseFloat(val)+parseFloat(amtval)}); } }





      code_to_name = %Q|afterSaveCell : function(rowid,name,val,iRow,iCol) 
                          { if(name.match(/_code/i)) { var nameval = "zzzzzzz";
                                                       var newcolm = name.replace("code","name");  
                                                       jQuery("##{id}").jqGrid('setRowData',rowid,{newcolm:nameval});
                                                                              } 
						    },|



jQuery("#list").setRowData( "1", { tax:"5", total:"205" })	



■ 正規表現オブジェクト
str = "ABCDEF";
if (str.match(/DEF/i)) {
    alert("DEFを含んでいます。");
}


datatype : function(postdata) { jQuery.ajax({ url: '/screen/code_to_name' , data:postdata, dataType:"json",
complete: function(jsondata,stat){ if(stat=="success")
{ var thegrid = jQuery("##{id}")[0]; thegrid.addJSONData(jsondata.responseJSON); } } }); },



datatype : function(postdata) { jQuery.ajax({ url:'server.php', data:postdata, dataType:"xml",
complete: function(xmldata,stat){ if(stat=="success")
{ var thegrid = jQuery("#"+gridid")[0]; thegrid.addXmlData(xmldata.responseXML); } } }); },


string.replace(regexp, newString) (e4/N4)

string の内、regexp にマッチする部分を newString に置き換えたものを返します。
Netscape Communicator の JavaScript1.3 では newString の部分に関数を指定することができます。
マッチングの規則については「正規表現」を参照してください。

xx1 = "This is a pen.".replace("pen", "book");
xx2 = "AB".replace("(.)(.)",
    function(str, p1, p2) {
        return(p2 + p1);
    });



jQuery("#celltbl").jqGrid({
        url:'server.php?q=2',
        datatype: "json",
        colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
        colModel:[
                {name:'id',index:'id', width:55},
                {name:'invdate',index:'invdate', width:90,editable:true},
                {name:'name',index:'name asc, invdate', width:100},
                {name:'amount',index:'amount', width:80, align:"right",editable:true,editrules:{number:true}},
                {name:'tax',index:'tax', width:80, align:"right",editable:true,editrules:{number:true}},               
                {name:'total',index:'total', width:80,align:"right"},          
                {name:'note',index:'note', width:150, sortable:false}          
        ],
        rowNum:10,
        rowList:[10,20,30],
        imgpath: gridimgpath,
        pager: jQuery('#pcelltbl'),
        sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"Cell Edit Example",
        forceFit : true,
        cellEdit: true,
        cellsubmit: 'clientArray',
        afterEditCell: function (id,name,val,iRow,iCol){
                if(name=='invdate') {
                        jQuery("#"+iRow+"_invdate","#celltbl").datepicker({dateFormat:"yy-mm-dd"});
                }
        },
        afterSaveCell : function(rowid,name,val,iRow,iCol) {
                if(name == 'amount') {
                        var taxval = jQuery("#celltbl").getCell(rowid,iCol+1);
                        jQuery("#celltbl").setRowData(rowid,{total:parseFloat(val)+parseFloat(taxval)});
                }
                if(name == 'tax') {
                        var amtval = jQuery("#celltbl").getCell(rowid,iCol-1);
                        jQuery("#celltbl").setRowData(rowid,{total:parseFloat(val)+parseFloat(amtval)});
                }
        }
}).navGrid('#pgwidth',{edit:false,add:false,del:false});




code_to_name = %Q|code_To_name: function (posdata,formid,mode) 
                           { var nameval = "zzzzzzz";
			     jQuery("#loca_name",formid).val(nameval);
						    }|
 code_to_name = %Q|afterSaveCell : function(rowid,name,val,iRow,iCol) 
                           { var nameval = "zzzzzzz";
                             jQuery("##{id}").jqGrid('setRowData',rowid,{newcolm:nameval});
						    },|


      code_to_name = %Q| {afterShowForm:function(formid) 
                           { var nameval = "zzzzzzz";
			     jQuery("#tr_loca_code",formid).change(function(formid){ 
			        jQuery("#tr_loca_name",formid).val(nameval)});
			     }}|
      code_to_name = %Q|function(formid) { 
                                jQuery("input",formid).change(function(){ 
				        var chgname = jQuery(this).attr("name");
					if(chgname.match(/_code/i)){
					   unless(chgname.match(/#{id.split(/_/,2)[1].chop.downcase}/i)){
					          val newname = "#"+chgname.replce("_code","_name");
					           jQuery(newname,formid).val("zyz");}}
				})}|




	基本形
      code_to_name = %Q|function(formid) { 
                                jQuery("#tr_loca_code",formid).change(function(){ 
			                var nameval = "";
			                jQuery("#loca_name",formid).val(nameval);
				})}|

      code_to_name = %Q|function(formid) { 
                                jQuery("input",formid).change(function(){ 
				        var chgname = jQuery(this).attr("name");
					if(chgname.match(/_code/i)){ if(chgname.match(/#{id.split(/_/,2)[1].chop.downcase}/i)){}
					  else{ var newname = "#"+chgname.replace("_code","_name");
					           jQuery(newname,formid).val("zyz"); 
					      }
					}
				})}|





      col_names = "[" # Labels
      col_model = "[" # Options
      columns.each do |c|
        col_names << %Q|"#{c[:label]}",|
	col_model << %Q|{name:"#{c[:field]}", index:"#{c[:field]}"#{get_attributes(c)}#{ code_to_name.sub("newcolm",c[:field].sub("_code","_name")) if c[:field] =~ /_code/ } },|
      end
