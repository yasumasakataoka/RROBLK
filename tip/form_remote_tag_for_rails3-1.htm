<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head profile="http://gmpg.org/xfn/11">



  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Unobtrusive JavaScript in Rails 3  –  Simone Carletti's Blog</title>

    <meta name="description" content="How to upgrade your JavaScript codebase from Rails 2 to Rails 3 Unobtrusive JavaScript, with real jQuery examples included.">
  
  <link rel="stylesheet" href="form_remote_tag_for_rails3-1_files/style.css" type="text/css" media="screen">
  <link rel="pingback" href="http://www.simonecarletti.com/blog/xmlrpc.php">
  <link rel="search" type="application/opensearchdescription+xml" title="SimoneCarletti.com" href="http://www.simonecarletti.com/opensearch.xml">

  <link href="form_remote_tag_for_rails3-1_files/all.css" media="screen" rel="stylesheet" type="text/css">
  <link href="form_remote_tag_for_rails3-1_files/wordpress.css" media="screen" rel="stylesheet" type="text/css">

  <script src="form_remote_tag_for_rails3-1_files/ga.js" async="" type="text/javascript"></script><script src="form_remote_tag_for_rails3-1_files/jquery.js" type="text/javascript"></script>
  <script src="form_remote_tag_for_rails3-1_files/jquery-ui.js" type="text/javascript"></script>

  <script src="form_remote_tag_for_rails3-1_files/blog.js" type="text/javascript"></script>
  
    <script type="text/javascript">
	window.google_analytics_uacct = "UA-53225-16";
</script>
<link rel="alternate" type="application/rss+xml" title="Simone Carletti's Blog » Feed" href="http://www.simonecarletti.com/blog/feed/">
<link rel="alternate" type="application/rss+xml" title="Simone Carletti's Blog » Comments Feed" href="http://www.simonecarletti.com/blog/comments/feed/">
				
	<script type="text/javascript">//<![CDATA[
	// Google Analytics for WordPress by Yoast v4.0.13 | http://yoast.com/wordpress/google-analytics/
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount','UA-53225-16']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	//]]></script>
<link rel="alternate" type="application/rss+xml" title="Simone Carletti's Blog » Unobtrusive JavaScript in Rails 3 Comments Feed" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/feed/">
<script type="text/javascript" src="form_remote_tag_for_rails3-1_files/l10n.js"></script>
<script type="text/javascript" src="form_remote_tag_for_rails3-1_files/comment-reply.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.simonecarletti.com/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.simonecarletti.com/blog/wp-includes/wlwmanifest.xml"> 
<link rel="index" title="Simone Carletti's Blog" href="http://www.simonecarletti.com/blog/">
<link rel="start" title="Creating a blog sitemap with Movable Type" href="http://www.simonecarletti.com/blog/2005/10/creating-a-blog-sitemap-with-movable-type/">
<link rel="prev" title="Understanding the Unobtrusive JavaScript technique" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-technique/">
<link rel="next" title="The Road to Rails 3: make your Rails 2.3 project more Rails 3 oriented" href="http://www.simonecarletti.com/blog/2010/07/the-way-to-rails-3/">
<meta name="generator" content="WordPress 3.1.2">
<link rel="canonical" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/">
<link rel="shortlink" href="http://www.simonecarletti.com/blog/?p=1105">

<link rel="stylesheet" href="form_remote_tag_for_rails3-1_files/wp-syntax.css" type="text/css" media="screen">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<!-- Wordpress Popular Posts v2.1.4 -->
<script type="text/javascript" charset="utf-8">
    /* <![CDATA[ */				
	jQuery.post('http://www.simonecarletti.com/blog/wp-admin/admin-ajax.php', {action: 'wpp_update', token: 'b2276a2f39', id: 1105});
    /* ]]> */
</script>
<!-- End Wordpress Popular Posts v2.1.4 -->
            
<!-- Wordpress Popular Posts v2.1.4 -->
<link rel="stylesheet" href="form_remote_tag_for_rails3-1_files/wpp.css" type="text/css" media="screen">
<!-- End Wordpress Popular Posts v2.1.4 -->
</head><body class="single single-post postid-1105 single-format-standard">

  <div id="header" class="container_12 clearfix">
    <div id="logo" class="grid_8">
      <a href="http://www.simonecarletti.com/blog/">Simone Carletti <em class="target-blog">'s Blog</em></a>
    </div>
    <div id="menu" class="grid_4">
      <ul id="nav">
        <li><a href="http://www.simonecarletti.com/" class="target-home">Home</a></li>
        <li><a href="http://www.simonecarletti.com/blog" class="target-blog">Blog</a></li>
        <li><a href="http://code.simonecarletti.com/" class="target-code">Code</a></li>
        <li><a href="http://www.simonecarletti.com/quotes" class="target-quotes">Quotes</a></li>
      </ul>
    </div>
  </div>

  <hr class="single separator_12">

  <div id="content" class="container_12 clearfix">
    <div class="grid_8">

  <div class="post-1105 post type-post status-publish format-standard hentry category-programming tag-jquery tag-prototype tag-rails tag-rails-3 tag-ruby tag-ujs" id="post-1105">
    <h1 class="title">Unobtrusive JavaScript in Rails 3</h1>
    <p class="meta">
      June 8th, 2010 at 1:40 pm •
      <a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/" rel="bookmark" title="Permanent Link to Unobtrusive JavaScript in Rails 3">permalink</a> •
      <a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comments" title="Comment on Unobtrusive JavaScript in Rails 3">39 comments</a>          </p>
    <div class="entry">
      <div class="alignright">
        <iframe title="Twitter For Websites: Tweet Button" style="width: 55px; height: 62px;" src="form_remote_tag_for_rails3-1_files/tweet_button.htm" allowtransparency="true" tabindex="0" class="twitter-share-button twitter-count-vertical" frameborder="0" scrolling="no"></iframe><script type="text/javascript" src="form_remote_tag_for_rails3-1_files/widgets.js"></script>
      </div>

      <p>One of the biggest changes on the frontend side of the upcoming Rails 3 version is th<strong>e replacement of the Prototype JavaScript helpers in favor of </strong><strong><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-technique/">Unobtrusive JavaScript (UJS)</a></strong>. The <a href="http://twitter.com/dhh/status/8391549740" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com']);">implementation of Unobtrusive JavaScript</a>, and the consequent removal of the old inline AJAX commands, offers at least three advantages:</p>
<ul>
<li><strong>Less verbose, inline, behavior code in the HTML document</strong>, with the result of much more lightweight, cleaner and readable source code</li>
<li><strong>Rails 3 is no longer Prototype-oriented</strong>. With Rails 3 you can easily switch from a JavaScript framework to an other.</li>
<li><strong>Rails 3 code is now JavaScript framework agnostic</strong>. It no longer contains framework-specific commands or scripts.</li>
</ul>
<p>Let’s jump right into an example. Do you remember the link to destroy an object, generated by the <code>link_to</code> helper?</p>
<pre class="code-ruby">&lt;%= link_to "delete", domain_path(@domain), :method =&gt; :delete, :confirm =&gt; "Are you sure?" %&gt;</pre>
<p>outputs</p>
<pre class="code-html">&lt;a href="/domains/1" class="destroy" onclick="if (confirm('Are you sure?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = this.href;var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method'); m.setAttribute('value', 'delete'); f.appendChild(m);var s = document.createElement('input'); s.setAttribute('type', 'hidden'); s.setAttribute('name', 'authenticity_token'); s.setAttribute('value', 'pKvg9hsnQ33uk='); f.appendChild(s);f.submit(); };return false;"&gt;delete</pre>
<p>The same Ruby helper call, in Rails 3, generates</p>
<pre class="code-html">&lt;a href="/domains/1" data-confirm="Are you sure?" data-method="delete" rel="nofollow"&gt;delete&lt;/a&gt;</pre>
<p>This is made possible by the use of Unobtrusive JavaScript. The entire logic to handle the emulation of the HTTP <code>DELETE</code>
 method has been extracted into a separate JavaScript file and is 
executed when the page is loaded. The scripts containing the behavior 
are then attached to their corresponding JavaScript events. We’ll take a
 closer look at that file in a few minutes.</p>
<p>This feature required a major rewrite of the ActionView helpers which resulted in the following changes:</p>
<ol>
<li>New helpers and files are available to add unobtrusive JavaScript support to your Rails application</li>
<li>The <code>ActionView::Helpers::PrototypeHelper</code> has been heavily modified. Many legacy helpers are now available as a <a title="rails's prototype_legacy_helper at master - GitHub" href="http://github.com/rails/prototype_legacy_helper" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','github.com']);">separate plugin</a></li>
<li>All the <code>remote_&lt;method&lt;</code> helpers has been removed. To make them working with AJAX, simply pass the <code>:remote =&gt; true</code> option to the original non-remote method</li>
<li>All the AJAX-specific options representing callbacks are gone. For instance, there’s no <code>:loaded</code>, <code>:loading</code> or <code>:complete</code> option for remote <code>link_to</code> helper anymore.</li>
</ol>
<p><span id="more-1105"></span><br>
</p><div class="flash-message with-icon featured clearfix">
<a href="http://thinkcode.tv/catalog/upgrading-rails-3/?utm_source=simonecarletti.com&amp;utm_medium=link&amp;utm_content=message-rails3upgrade&amp;utm_campaign=rails3upgrade" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','thinkcode.tv']);"><img src="form_remote_tag_for_rails3-1_files/rails3-small.png" class="alignleft" height="100"></a>
<h4>Upgrading to Rails 3 screencast</h4>
<p>Looking for a Rails 3 screencast? <a href="http://thinkcode.tv/catalog/upgrading-rails-3/?utm_source=simonecarletti.com&amp;utm_medium=link&amp;utm_content=message-rails3upgrade&amp;utm_campaign=rails3upgrade" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','thinkcode.tv']);">This one hour screencast is a live example of upgrading a real-world application from Rails 2 to Rails 3.</a></p>
</div>
<h2>So what?</h2>
<p>At this point, you might be wondering what does this means in 
practice and what you need to change in order to make your Rails 2 
application working with Rails 3.</p>
<p>So let’s go back to the list of changes and discuss each point in the
 list. I’m assuming you will use the jQuery framework, but the same 
principles can apply to all the other supported JavaScript frameworks.</p>
<h2>1. New helpers and files</h2>
<p>The heart of the Unobtrusive JavaScript feature in Rails 3 is the new <code>rails.js</code> file. When you generate a new Rails 3 application, a file called <code>rails.js</code> is created in the <code>public/javascripts</code> folder along with all the other <code>.js</code> files you are used to see in a Rails 2 project.</p>
<p><code>rails.js</code> contains all the unobtrusive handlers. By default, Rails assumes you are using Prototype, but there’s also an <a title="rails's jquery-ujs at master - GitHub" href="http://github.com/rails/jquery-ujs" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','github.com']);">official fork for jQuery</a>.</p>
<p>You need to include this file in your application to have all the 
unobtrusive features working correctly. Because rails.js is part of the <code>:defaults</code> bundle, if you are using the following statement you don’t need to change anything.</p>
<pre class="code-ruby">&lt;%= javascript_include_tag :defaults %&gt;</pre>
<p>Otherwise, you can include the files separately. This is the case, 
when you want a more fine-grained control over the scripts included in 
your application or you want to use other alternatives, such as a <abbr title="Content Delivery Network">CDN</abbr>.</p>
<pre class="code-ruby">&lt;%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js", "jquery.rails.js", "application.js" %&gt;</pre>
<p>Now we knows about the files, but what about the helpers? If you ever
 worked with remote helpers in Rails 2, you are probably aware of the 
Rails <a title="Ruby On Rails Security Guide" href="http://guides.rubyonrails.org/security.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','guides.rubyonrails.org']);">authentication token</a>. In Rails 3, the authentication token still exists, but it needs an unobtrusive touch.</p>
<p>Here comes the new <code>csrf_meta_tag</code> helper. It returns two HTML meta tags which include all the information necessary to support the XSS protection in Rails 3.</p>
<pre class="code-html">&lt;meta name="csrf-param" content="authenticity_token"/&gt;
&lt;meta name="csrf-token" content="9SdBB/Uftw7IDQH4aKblEUcLXwvgw9vkju9N1ObyCCM="/&gt;</pre>
<p>Because the output is meta tags, this helper is expected to be called
 in the head section of your HTML page. In all likelihood, this will 
happen in your Rails layout files.</p>
<p>Here’s the simplest Rails 3 layout</p>
<pre class="code-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Foo&lt;/title&gt;
  &lt;%= stylesheet_link_tag :all %&gt;
  &lt;%= javascript_include_tag :defaults %&gt;
  &lt;%= csrf_meta_tag %&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;%= yield %&gt;

&lt;/body&gt;
&lt;/html&gt;</pre>
<p>As you can guess from the <code>DOCTYPE</code> declaration, the new default Rails layout is a HTML 5 document. Get yourself accustomed to it, <a title="Understanding the Unobtrusive JavaScript technique  –  Simone Carletti's Blog" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-technique/#s-html5">unobtrusive JavaScript and HTML 5 are very good friends</a>.</p>
<h2>2. <code>ActionView::Helpers::PrototypeHelper</code></h2>
<p><code>ActionView::Helpers::PrototypeHelper</code> has been heavily modified. The following helpers have been removed and <a href="http://github.com/rails/prototype_legacy_helper" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','github.com']);">made available as a plugin</a>.</p>
<ul>
<li>button_to_remote</li>
<li>submit_to_remote</li>
<li>observe_field</li>
<li>observe_form</li>
<li>periodically_call_remote</li>
<li>link_to_remote (*)</li>
<li>form_remote_tag (*)</li>
<li>form_remote_for (*)</li>
<li>remote_form_for (*)</li>
</ul>
<p>(*) partially supported using the <code>:remote =&gt; true</code> option. See section 3.</p>
<p>If you are using one of these tags, you might need to rewrite the logic using Unobtrusive JavaScript.</p>
<p>Here’s an example for the <code>observe_field</code> helper, using jQuery. When the content of the field is changed, the browser triggers a call to the <code>:live_search</code> action and replaces the content of the <code>#results</code> element.</p>
<pre class="code-ruby">&lt;%= text_field_tag :search %&gt;
&lt;%= observe_field :search, :url =&gt; live_search_path, :update =&gt; :results %&gt;</pre>
<p>In Rails 3 becomes</p>
<pre class="brush: js; html-script: true;">// Append the function to the "document ready" chain
jQuery(function($) {
  // when the #search field changes
  $("#search").change(function() {
    // make a POST call and replace the content
    $.post(&lt;%= live_search_path %&gt;, function(data) {
      $("#results").html(data);
    });
  });
})</pre>
<p>The example above uses at least 3 different jQuery methods: <a title=".ready() – jQuery API" href="http://api.jquery.com/ready/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','api.jquery.com']);">$(document).ready()</a>, <a title=".change() – jQuery API" href="http://api.jquery.com/change/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','api.jquery.com']);">.change()</a>, and <a title="jQuery.post() – jQuery API" href="http://api.jquery.com/jQuery.post/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','api.jquery.com']);">jQuery.post</a>.</p>
<p>One additional note about the example. Placing a javascript_tag in 
the middle of a page is probably not so unobtrusive. I suggest you to 
take advantage of the <code>content_for</code> helper to dynamically 
inject the content in the head section of your page, or place all the 
login in a separate JavaScript file, such as <code>application.js</code>.</p>
<p>As you probably noticed, Rails 3 forces developers to have a deeper 
understanding of JavaScript. You gain flexibility for the price of 
additional development effort. From one side, this requirement makes 
Rails development less automatic, unlike it has been until today. From 
an other point of view, this requirement makes developers more aware of 
what they are doing.</p>
<p>If you are using Prototype, you might be tempted to install the 
legacy plugin. Don’t do it. Even if it makes Rails 3 upgrade easier, you
 would probably continue to use legacy helpers and your application will
 become harder to upgrade day after day. Taking the faster and easier 
way is not a good idea in the long terms. Schedule a reasonable amount 
of time and plan the full upgrade instead.</p>
<p>I believe this change would encounter many disappointed developers as
 soon as Rails 3 will be largely available, but I’m sure it will 
eventually become one of the most appreciate design decision in the long
 term. I strongly agree with the Rails 3 development team for this 
choice. It also comes at the right time. If Rails 1 or Rails 2 wouldn’t 
have included such easy way to write JavaScript from the beginning, many
 existing Rails developers would probably never been captured by the 
framework in the past.</p>
<h2>3. <code>remote_&lt;method&gt;</code> helpers</h2>
<p>As mentioned in the previous section, all <code>remote_something</code> and <code>something_to_remote</code> methods have been removed from Rails 3. Nonetheless, remote helpers are still available thanks to the <code>:remote =&gt; true</code> option.</p>
<p>Here’s a few examples.</p>
<pre class="code-ruby"># Rails 2
link_to_remote "Name", url_path
# Rals 3
link_to "Name", url_path, :remote =&gt; true

# Rails 2
form_tag "/path" do
end
# Rails 3
form_tag "/path", :remote =&gt; true do
end

# Rails 2
remote_form_for @article do
end
# Rails 3
form_for @article, :remote =&gt; true do
end</pre>
<p>Rails 3 helpers never write inline JavaScript. Instead, they use HTML
 5 data attributes to store remote metadata information within the HTML 
element. The <code>rails.js</code> file contains all the behavior required to handle these attributes.</p>
<p>Let’s use the <code>link_to</code> helper as example.</p>
<pre class="code-ruby">&lt;%= link_to "destroy", article_path(@article), :method =&gt; :delete, :remote =&gt; true %&gt;</pre>
<p>The output is</p>
<pre class="code-html">&lt;a href="/articles/1" data-method="delete" data-remote="true" rel="nofollow"&gt;destroy&lt;/a&gt;</pre>
<p>Notice the <code>data-method</code> and <code>data-remote</code> 
attributes. The first indicates you want to perform a DELETE HTTP 
request. The second identifies a remote request and is added whenever 
you use the <code>:remote</code> option.</p>
<pre class="code-ruby">&lt;%= link_to "destroy", article_path(@article) %&gt;
&lt;a href="/articles/1" rel="nofollow"&gt;destroy&lt;/a&gt;

&lt;%= link_to "destroy", article_path(@article), :method =&gt; :delete %&gt;
&lt;a href="/articles/1" data-remote="true" rel="nofollow"&gt;destroy&lt;/a&gt;

&lt;%= link_to "destroy", article_path(@article), :remote =&gt; true %&gt;
&lt;a href="/articles/1" data-remote="true" rel="nofollow"&gt;destroy&lt;/a&gt;</pre>
<p>If you open the <code>rails.js</code> file, you will notice several 
remote handler definitions. The first one handles the case of remote 
form submission, the second one handles remote links and input fields, 
the third handles not-remote links that should behave likes form.</p>
<pre class="brush: js; html-script: true;">/**
 * remote handlers
 */
$('form[data-remote]').live('submit', function(e) {
  $(this).callRemote();
  e.preventDefault();
});

$('a[data-remote],input[data-remote]').live('click', function(e) {
  $(this).callRemote();
  e.preventDefault();
});

$('a[data-method]:not([data-remote])').live('click', function(e) {
  // ...
});</pre>
<p>I strongly encourage you to <strong>carefully examine the content of the </strong><code><strong>rails.js</strong></code>
 file before actually starting with the upgrade. As I said before, this 
is the center of the Rails 3 unobtrusive feature and you <strong>MUST</strong> have a good understanding of it.</p>
<p>Ryan Bates also created a very good screencast about <a title="Railscasts - Unobtrusive Javascript" href="http://railscasts.com/episodes/205-unobtrusive-javascript" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','railscasts.com']);">upgrading remote helpers to Rails 3</a>.</p>
<h3>Reserved data attributes</h3>
<p>From the <code>rails.js</code> file we can also extract the list of <code>data-</code> attributes which have a special meaning in Rails 3 and should therefore be considered reserved keys.</p>
<ul>
<li><code>data-method</code></li>
<li><code>data-confirm</code></li>
<li><code>data-remote</code></li>
<li><code>data-disable-with</code></li>
</ul>
<p>As a bonus feature, you don’t a Rails helper to take advantage of 
them. For instance, the following example will cause a confirmation 
dialog to appear when the button is clicked.</p>
<pre class="code-html">&lt;button data-confirm="Do you really want to continue?"&gt;Click me&lt;/button&gt;</pre>
<h2>4. Remote JavaScript callbacks</h2>
<p>One topic I have never found covered so far in all the existing 
Unobtrusive JavaScript Rails 3 posts is remote JavaScript callbacks. 
This is odd because they are largely used. More precisely, I’m talking 
about the <code>:loading</code>, <code>:loaded</code>, <code>:success</code>, etc callbacks.</p>
<p>Quoting the link_to_remote Rails 2 documentation</p>
<blockquote><p>The callbacks that may be specified are (in order):</p>
<table>
<tbody>
<tr>
<td valign="top"><tt>:loading</tt>:</td>
<td>Called when the remote document is being loaded with data by the browser.</td>
</tr>
<tr>
<td valign="top"><tt>:loaded</tt>:</td>
<td>Called when the browser has finished loading the remote document.</td>
</tr>
<tr>
<td valign="top"><tt>:interactive</tt>:</td>
<td>Called when the user can interact with the remote document, even though it<br>
has not finished loading.</td>
</tr>
<tr>
<td valign="top"><tt>:success</tt>:</td>
<td>Called when the XMLHttpRequest is completed, and the HTTP status code is in<br>
the 2XX range.</td>
</tr>
<tr>
<td valign="top"><tt>:failure</tt>:</td>
<td>Called when the XMLHttpRequest is completed, and the HTTP status code is<br>
not in the 2XX range.</td>
</tr>
<tr>
<td valign="top"><tt>:complete</tt>:</td>
<td>Called when the XMLHttpRequest is complete (fires after success/failure if<br>
they are present).</td>
</tr>
</tbody>
</table>
<p>You can further refine <tt>:success</tt> and <tt>:failure</tt> by adding additional callbacks for specific status codes.</p>
<p>Example:</p>
<pre>    # Generates: &lt;a href="#" onclick="new Ajax.Request('/testing/action', {asynchronous:true, evalScripts:true,
    #            on404:function(request){alert('Not found...? Wrong URL...?')},
    #            onFailure:function(request){alert('HTTP Error ' + request.status + '!')}}); return false;"&gt;hello&lt;/a&gt;
    link_to_remote word,
      :url =&gt; { :action =&gt; "action" },
      404 =&gt; "alert('Not found...? Wrong URL...?')",
      :failure =&gt; "alert('HTTP Error ' + request.status + '!')"</pre>
<p>A status code callback overrides the success/failure handlers if present.</p></blockquote>
<p>These callbacks have not disappeared in Rails 3. It turns out they are now <strong>available as framework-native JavaScript events</strong>.</p>
<p>To better understand this point, we need to open the rails.js file 
again. Remember, for the purpose of this article I’m still referring to 
the official jQuery version.</p>
<p>Locate the <code>callRemote</code> function and search for the following lines:</p>
<pre class="brush: js; html-script: true;">beforeSend: function (xhr) {
  el.trigger('ajax:loading', xhr);
},
success: function (data, status, xhr) {
  el.trigger('ajax:success', [data, status, xhr]);
},
complete: function (xhr) {
  el.trigger('ajax:complete', xhr);
},
error: function (xhr, status, error) {
  el.trigger('ajax:failure', [xhr, status, error]);
}</pre>
<p>Here they are, our lovely callbacks. They are now implemented as <a title="Category:Events - jQuery JavaScript Library" href="http://docs.jquery.com/Category:Events" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','docs.jquery.com']);">jQuery events</a>:</p>
<ol>
<li><code>ajax:loading</code> – triggered before executing the AJAX request</li>
<li><code>ajax:success</code> – triggered after a successful AJAX request</li>
<li><code>ajax:complete</code> – triggered after the AJAX request is complete, regardless the status of the response</li>
<li><code>ajax:failure</code> – triggered after a failed AJAX request, as opposite to <code>ajax:success</code></li>
</ol>
<p>If you are barely familiar with the <a title="jQuery.ajax() – jQuery API" href="http://api.jquery.com/jQuery.ajax/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','api.jquery.com']);">jQuery.ajax()</a> method, you already noticed that these custom Rails callbacks are very close to the original <a title="jQuery.ajax() – jQuery API" href="http://api.jquery.com/jQuery.ajax/#callback-functions" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','api.jquery.com']);">jQuery AJAX callback functions</a>.</p>
<p>At this point, you are probably expecting a real example. I don’t want to disappoint you, so here it is, directly <a title="HTTP Header Checker - Simone Carletti" href="http://www.simonecarletti.com/tools/http-checker/index">from this site</a>.</p>
<p>We have the following Rails 2 form, which needs to show/hide a loading spinner to indicate the execution of the AJAX request.</p>
<pre class="code-ruby">&lt;% form_remote_tag :url =&gt; { :action =&gt; 'run' },
            :id =&gt; "tool-form",
            :update =&gt; { :success =&gt; "response", :failure =&gt; "error" },
            :loading =&gt; "$('#loading').toggle()", :complete =&gt; "$('#loading').toggle()" %&gt;</pre>
<p>Of course, there are several different ways to accomplish this task 
and if I would go back, I would probably use a different jQuery-oriented
 alternative, but in the past it was dead simple to add such callbacks 
using Rails so let’s just upgrade the existing implementation to work 
with Rails 3.</p>
<p>First, remove all Rails 2 stuff and add the Rails 3 <code>:remote</code> option.</p>
<pre class="code-ruby">&lt;% form_tag url_for(:action =&gt; "run"), :id =&gt; "tool-form", :remote =&gt; true do %&gt;</pre>
<p>Then, bind the function to toggle the spinner visibility to the 
appropriate AJAX events. Also, on success replace the content of <code>#response</code> with the response data.</p>
<pre class="brush: js; html-script: true;">jQuery(function($) {
  // create a convenient toggleLoading function
  var toggleLoading = function() { $("#loading").toggle() };

  $("#tool-form")
    .bind("ajax:loading",  toggleLoading)
    .bind("ajax:complete", toggleLoading)
    .bind("ajax:success", function(event, data, status, xhr) {
      $("#response").html(data);
    });
});</pre>
<h2>Remember</h2>
<p>The upgrade to Rails 3 can be a bit more complicated if you heavily 
relied on Rails JavaScript generators in the past, but the benefits of 
switching to the Unobtrusive JavaScript patterns is definitely worth the
 effort.</p>
<p>Rails 3 forces developers to have a deeper JavaScript knowledge than 
in the past. Don’t underestimate the importance of this task, it’s an 
excellent chance to learn something more about the today <a title="The most important programming language today" href="http://antoniocangiano.com/2010/05/14/the-most-important-programming-language-today/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','antoniocangiano.com']);">most important programming language</a>.</p>
<p>I hope this article will help you migrating upgrading your application to Rails 3.</p>
<p></p><div class="flash-message with-icon featured clearfix">
<a href="http://thinkcode.tv/catalog/upgrading-rails-3/?utm_source=simonecarletti.com&amp;utm_medium=link&amp;utm_content=message-rails3upgrade&amp;utm_campaign=rails3upgrade" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','thinkcode.tv']);"><img src="form_remote_tag_for_rails3-1_files/rails3-small.png" class="alignleft" height="100"></a>
<h4>Upgrading to Rails 3 screencast</h4>
<p>Looking for a Rails 3 screencast? <a href="http://thinkcode.tv/catalog/upgrading-rails-3/?utm_source=simonecarletti.com&amp;utm_medium=link&amp;utm_content=message-rails3upgrade&amp;utm_campaign=rails3upgrade" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','thinkcode.tv']);">This one hour screencast is a live example of upgrading a real-world application from Rails 2 to Rails 3.</a></p>
</div>


<h3 id="related-posts">Related posts</h3><ol><li><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-technique/" rel="bookmark" title="Permanent Link: Understanding the Unobtrusive JavaScript technique">Understanding the Unobtrusive JavaScript technique</a></li>
<li><a href="http://www.simonecarletti.com/blog/2010/07/the-way-to-rails-3/" rel="bookmark" title="Permanent Link: The Road to Rails 3: make your Rails 2.3 project more Rails 3 oriented">The Road to Rails 3: make your Rails 2.3 project more Rails 3 oriented</a></li>
<li><a href="http://www.simonecarletti.com/blog/2009/02/helperful-a-large-collection-of-rails-helpers/" rel="bookmark" title="Permanent Link: Helperful: a large collection of Rails Helpers">Helperful: a large collection of Rails Helpers</a></li>
<li><a href="http://www.simonecarletti.com/blog/2010/09/rails-3-beware-the-tap-pattern/" rel="bookmark" title="Permanent Link: Upgrading to Rails 3: Beware of the Object#tap pattern">Upgrading to Rails 3: Beware of the Object#tap pattern</a></li>
<li><a href="http://www.simonecarletti.com/blog/2010/04/inside-ruby-on-rails-serializing-ruby-objects-with-json/" rel="bookmark" title="Permanent Link: Understanding Ruby and Rails: Serializing Ruby objects with JSON">Understanding Ruby and Rails: Serializing Ruby objects with JSON</a></li>
</ol>          </div>
    <p class="meta">
      Filed in <a href="http://www.simonecarletti.com/blog/categories/programming/" title="View all posts in Programming" rel="category tag">Programming</a> •
      Tags: <a href="http://www.simonecarletti.com/blog/tags/jquery/" rel="tag">jquery</a>, <a href="http://www.simonecarletti.com/blog/tags/prototype/" rel="tag">prototype</a>, <a href="http://www.simonecarletti.com/blog/tags/rails/" rel="tag">rails</a>, <a href="http://www.simonecarletti.com/blog/tags/rails-3/" rel="tag">rails 3</a>, <a href="http://www.simonecarletti.com/blog/tags/ruby/" rel="tag">ruby</a>, <a href="http://www.simonecarletti.com/blog/tags/ujs/" rel="tag">ujs</a>    </p>
  </div>

  
  <h3 id="comments">Comments</h3>

  <div class="navigation">
    <div class="alignleft"></div>
    <div class="alignright"></div>
  </div>

  <div class="commentlist">
    		<div class="comment even thread-even depth-1" id="comment-12066">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/4e99b0a6b41f2eae698d2a30c420ea1f.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">lg1046</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-12066">
			June 9, 2010 at 8:22 am</a>		</div>

		<p>very a nice artice<br>
thank you</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=12066#respond" onclick='return addComment.moveForm("comment-12066", "12066", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-12067">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/ca122eca5d377d3a3e856aee13ec0cc9.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://dennisbloete.de/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','dennisbloete.de']);" rel="external nofollow" class="url">Dennis</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-12067">
			June 9, 2010 at 11:59 am</a>		</div>

		<p>Thank you for taking the time to write this comprehensive article, much appreciated!</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=12067#respond" onclick='return addComment.moveForm("comment-12067", "12067", "respond", "1105")'>Reply</a>		</div>
				<div class="comment byuser comment-author-weppos bypostauthor even depth-2" id="comment-12069">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-12069">
			June 9, 2010 at 12:29 pm</a>		</div>

		<p>Thanks Dennis. </p>
<p>Following your profile link I just discovered iOctopus.<br>
That’s amazing!</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=12069#respond" onclick='return addComment.moveForm("comment-12069", "12069", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="comment odd alt thread-even depth-1 parent" id="comment-12068">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/4f4122bc3b9999d9050f0b1a10b63251.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Reggie</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-12068">
			June 9, 2010 at 12:22 pm</a>		</div>

		<p>Great articole Simone!<br>
I liked it a lot… now lets go into the new Rails 3 world !</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=12068#respond" onclick='return addComment.moveForm("comment-12068", "12068", "respond", "1105")'>Reply</a>		</div>
				<div class="comment byuser comment-author-weppos bypostauthor even depth-2" id="comment-12070">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-12070">
			June 9, 2010 at 12:32 pm</a>		</div>

		<p>Hi Andrea, thanks for stopping by!</p>
<p>I have been waiting for you to connect on Gtalk since a few weeks!<br>
I wanted to send you my congratulations for your project <a href="http://bit.ly/brjANL" onclick="javascript:_gaq.push(['_trackEvent','outbound-comment','bit.ly']);" rel="nofollow">http://bit.ly/brjANL</a> ;)</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=12070#respond" onclick='return addComment.moveForm("comment-12070", "12070", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="pingback odd alt thread-odd thread-alt depth-1" id="comment-12722">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://keithschacht.org/getting-ajax-to-work-in-rails-3-with-jquery/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','keithschacht.org']);" rel="external nofollow" class="url">Keith Schacht » Blog Archive » Getting AJAX to work in Rails 3 with jQuery</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-12722">
			July 1, 2010 at 5:38 pm</a>		</div>

		<p>[...] Unobtrusive javascript in rails 3 Railscast – Unobtrusive 
javascript jQuery and Rails 3 Filed under: GeekKeith   Get notified of 
new posts! [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=12722#respond" onclick='return addComment.moveForm("comment-12722", "12722", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-even depth-1 parent" id="comment-13275">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/e884d559ed311e48ec9831b895719b2a.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.cowboycoded.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.cowboycoded.com']);" rel="external nofollow" class="url">cowboycoded</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13275">
			July 15, 2010 at 5:58 pm</a>		</div>

		<p>Great tutorial!  It is definitely the best on UJS in Rails 3 that I
 have seen.  Info on callbacks is what I was looking for and like you 
said, no one is writing about them.  I was planning on using the legacy 
plugin until I read this.  Thanks for this!</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13275#respond" onclick='return addComment.moveForm("comment-13275", "13275", "respond", "1105")'>Reply</a>		</div>
				<div class="comment byuser comment-author-weppos bypostauthor odd alt depth-2" id="comment-13385">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13385">
			July 20, 2010 at 3:30 pm</a>		</div>

		<p>You’re welcome cowboycoded. Also thank you for referencing me in your blog post.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13385#respond" onclick='return addComment.moveForm("comment-13385", "13385", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="pingback even thread-odd thread-alt depth-1" id="comment-13384">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://www.cowboycoded.com/2010/07/20/replacing-link_to_remote-with-ujs-in-rails-3-prototype/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.cowboycoded.com']);" rel="external nofollow" class="url">Replacing link_to_remote with UJS in Rails 3 (Prototype) « Cowboy Coded</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13384">
			July 20, 2010 at 3:21 pm</a>		</div>

		<p>[...] Simone Carletti has a good overview on UJS in Rails 3, and is more geared towards jQuery – <a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/" rel="nofollow">http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/</a> [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13384#respond" onclick='return addComment.moveForm("comment-13384", "13384", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-even depth-1" id="comment-13476">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/fdee1445100410c603ab03033564e55c.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://scottschulthess.com/coding" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','scottschulthess.com']);" rel="external nofollow" class="url">Scott Schulthes</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13476">
			July 24, 2010 at 1:32 pm</a>		</div>

		<p>Thanks for the help, this saved me some time and wasn’t 100% clear in the rdoc</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13476#respond" onclick='return addComment.moveForm("comment-13476", "13476", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="pingback even thread-odd thread-alt depth-1" id="comment-13555">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://www.simonecarletti.com/blog/2010/07/the-way-to-rails-3-make-your-rails-2-3-project-more-rails-3-oriented/" rel="external nofollow" class="url">The Way to Rails 3: make your Rails 2.3 project more Rails 3 oriented – Simone Carletti's Blog</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13555">
			July 26, 2010 at 4:12 pm</a>		</div>

		<p>[...] Rails 3 is no longer Prototype-oriented, Rails 3 code is now 
JavaScript framework agnostic and there are many incompatible changes 
that require your attention. Learn more about Unobtrusive JavaScript in 
Rails 3. [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13555#respond" onclick='return addComment.moveForm("comment-13555", "13555", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-even depth-1 parent" id="comment-13591">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/9c726cfc87b9aade540289416a6defce.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Francis</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13591">
			July 27, 2010 at 7:21 pm</a>		</div>

		<p>If using prototype, an easy way to handle callbacks on all Ajax 
requests is to use the Ajax.Responders. Something like this, which would
 show/hide a div with a loading icon (or whatever it has in it), with 
each ajax request. Include in the application layout:</p>
<pre>  Ajax.Responders.register( {
    onCreate: function() { $('loading').show(); },
    onComplete: function() { $('loading').hide(); }
    });
</pre>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13591#respond" onclick='return addComment.moveForm("comment-13591", "13591", "respond", "1105")'>Reply</a>		</div>
				<div class="comment even depth-2" id="comment-24936">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/e2dc6eb3b9639baa5d51c4f8e74c8f2c.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">WLiCPSC</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-24936">
			February 15, 2011 at 8:21 pm</a>		</div>

		<p>Hi there: just seen this comment, I desperately need this loading 
image or screen to show up, can you tell me which exact file to put this
 piece in? Thanks very much.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=24936#respond" onclick='return addComment.moveForm("comment-24936", "24936", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="comment odd alt thread-odd thread-alt depth-1" id="comment-13777">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/91459071ad22c77372c5697e3f43cb1b.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.dept42.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.dept42.com']);" rel="external nofollow" class="url">Chris Williams</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13777">
			August 4, 2010 at 9:29 am</a>		</div>

		<p>Note, importantly, that the correct signature for the callback is as follows:</p>
<pre>.bind('ajax:success', function(evt, data, status, xhr) {</pre>
<p>The example as written would work, but is somewhat misleading.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13777#respond" onclick='return addComment.moveForm("comment-13777", "13777", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-even depth-1" id="comment-13857">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/e114a33edfd0daa643a627aa1c5839a3.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://nucc.bteam.hu/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','nucc.bteam.hu']);" rel="external nofollow" class="url">Nucc</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13857">
			August 7, 2010 at 4:35 pm</a>		</div>

		<p>Can I ask something. I have a problem with remote form in Rails 3. 
I’ve created button elements with divs and I have an &lt;a&gt; tag to 
submit my form. My question is how I should construct this &lt;a&gt; 
element?</p>
<p>If I use data-remote and data-method in the &lt;a&gt; tag, it behaves
 like a seperated form and it sends no input value from my form (in the 
rails.js it constructs an own form)</p>
<p>If I use only data-remote, it doesn’t send any POST parameters to the server, only the header information.</p>
<p>If I use only the data-method, or writing it’s onclick slot to call 
form’s submit() method, it behaves a plain form without any AJAX and 
redirects to the page contained by the href attribute.</p>
<p>Have you got any idea, how can I solve this (seems to be really simple) problem?</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13857#respond" onclick='return addComment.moveForm("comment-13857", "13857", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-odd thread-alt depth-1" id="comment-13859">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/e114a33edfd0daa643a627aa1c5839a3.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://nucc.bteam.hu/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','nucc.bteam.hu']);" rel="external nofollow" class="url">Nucc</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13859">
			August 7, 2010 at 4:37 pm</a>		</div>

		<p>Hey guy, you should escape your inputs … there’s an &lt; a &gt; before the “tag to submit my form”</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13859#respond" onclick='return addComment.moveForm("comment-13859", "13859", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="pingback even thread-even depth-1" id="comment-13974">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://www.petermac.com/rails-3-jquery-and-multi-select-dependencies/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.petermac.com']);" rel="external nofollow" class="url">Rails 3, jQuery and multi-select dependencies | Peter Mac And Associates</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-13974">
			August 13, 2010 at 7:41 am</a>		</div>

		<p>[...] Simone Carletti’s Blog [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=13974#respond" onclick='return addComment.moveForm("comment-13974", "13974", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-odd thread-alt depth-1" id="comment-14063">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/30a45c64b2ef288f7ec098c5fb353a22.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.dixis.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.dixis.com']);" rel="external nofollow" class="url">nathanvda</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-14063">
			August 17, 2010 at 2:44 pm</a>		</div>

		<p>Great article. I especially appreciated the part about the remote 
callbacks, i was unable to find that anywhere else. Thank you very much!</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=14063#respond" onclick='return addComment.moveForm("comment-14063", "14063", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-even depth-1 parent" id="comment-14076">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/ee0293412faca21e4ebf3326ed9d5f8c.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.optimalanalysis.co.uk/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.optimalanalysis.co.uk']);" rel="external nofollow" class="url">erwin</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-14076">
			August 17, 2010 at 7:21 pm</a>		</div>

		<p>Thanks for all these info… I am trying to rewrite some Rails 2 app w Rails 3…<br>
could not find any example of replacing the onclick on an input checkbox w an Ajax request in Rails 3</p>
<p>I wrote </p>
<p>= check_box_tag “selection”, “1″, false, {:id =&gt; user.id, :remote =&gt; true, :url =&gt; showHideMenuItem_admin_user_path }<br>
but it’s not generating any Ajax request at all… any clue ?</p>
<p>erwin</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=14076#respond" onclick='return addComment.moveForm("comment-14076", "14076", "respond", "1105")'>Reply</a>		</div>
				<div class="comment odd alt depth-2" id="comment-14082">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/ee0293412faca21e4ebf3326ed9d5f8c.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.optimalanalysis.co.uk/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.optimalanalysis.co.uk']);" rel="external nofollow" class="url">erwin</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-14082">
			August 18, 2010 at 4:32 am</a>		</div>

		<p>I should be using the prototype_helper     onclick =&gt; remote_function(), but is it going to be replaced too ?</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=14082#respond" onclick='return addComment.moveForm("comment-14082", "14082", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment byuser comment-author-weppos bypostauthor even depth-2" id="comment-14092">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-14092">
			August 18, 2010 at 3:02 pm</a>		</div>

		<p>AFAIK, the <code>check_box_tag</code> helper doesn’t support the <code>:remote</code> option.<br>
You need to create an AJAX call based on the onclick event.</p>
<p>In jQuery you can use the <code>.click()</code> handler.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=14092#respond" onclick='return addComment.moveForm("comment-14092", "14092", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-14698">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/4ef1857333e7b1001ad4c83a26b30b30.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Chris Ledden</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-14698">
			September 7, 2010 at 9:01 pm</a>		</div>

		<p>Thanks for the post.  I am new to incorporating Javascript into Rails, and this certainly helps a lot.</p>
<p>I’m struggling with the best method to dynamically insert items into a
 “select” list box.  I am trying to achieve the paradigm where you 
display a list of items in the list, with a “…add new item” option, and 
if the user selects this, it pops up a new window with the appropriate 
New controller, allows them to add a new value, and close the pop up, 
and it automatically selects the new item in the list.</p>
<p>Any suggestions on the best way to implement this?</p>
<p>Keep up the great work.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=14698#respond" onclick='return addComment.moveForm("comment-14698", "14698", "respond", "1105")'>Reply</a>		</div>
				<div class="comment byuser comment-author-weppos bypostauthor even depth-2" id="comment-14700">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-14700">
			September 7, 2010 at 10:33 pm</a>		</div>

		<p>Chris, the pattern is quite simple.</p>
<p>1. Create the select.<br>
2. Populate the select with existing items plus a default item with default value (e.g. 0) and text “Add a new item”<br>
3. Attach a new #blur event that checks whether the value is the default value<br>
4. If so, open a popup (modal?) to add the new item.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=14700#respond" onclick='return addComment.moveForm("comment-14700", "14700", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="comment odd alt thread-even depth-1" id="comment-15326">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/110bcd4edcff8c61ef332348016ef5cb.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Mac</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-15326">
			September 23, 2010 at 11:20 pm</a>		</div>

		<p>What’s the recommended replacement for other prototype helpers like page.replace_html ?</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=15326#respond" onclick='return addComment.moveForm("comment-15326", "15326", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment byuser comment-author-weppos bypostauthor even thread-odd thread-alt depth-1" id="comment-15330">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-15330">
			September 24, 2010 at 2:01 am</a>		</div>

		<p>If you are using jQuery, you use the <code>html()</code> method.</p>
<pre>$("#element").html("&lt; %= variable %&gt;");</pre>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=15330#respond" onclick='return addComment.moveForm("comment-15330", "15330", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-even depth-1" id="comment-15947">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/ff782b497847b72a13faed2133d3d56d.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Wagner Pereira</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-15947">
			October 15, 2010 at 4:27 pm</a>		</div>

		<p>Carletti,</p>
<p>Wouldn’t be better inject the code using content_for on the end body 
section, before close it? Instead of the injection in the head of the 
page as you mentioned. </p>
<p>I would like to confirm that.</p>
<p>Thanks in advance.</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=15947#respond" onclick='return addComment.moveForm("comment-15947", "15947", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="pingback even thread-odd thread-alt depth-1" id="comment-16676">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://www.alfajango.com/blog/rails-3-remote-links-and-forms/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.alfajango.com']);" rel="external nofollow" class="url">Rails 3 Remote Links &amp; Forms: A Definitive Guide - Alfa Jango Blog</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-16676">
			October 28, 2010 at 7:51 pm</a>		</div>

		<p>[...] Unobtrusive JavaScript in Rails 3 – by Simon Carletti [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=16676#respond" onclick='return addComment.moveForm("comment-16676", "16676", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="pingback odd alt thread-even depth-1" id="comment-17609">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://blog.mighty-nice.com/2010/11/16/the-mighty-nice-march-to-ruby-on-rails-3-and-ruby-1-9-2/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','blog.mighty-nice.com']);" rel="external nofollow" class="url">The Mighty Nice March To Ruby On Rails 3 And Ruby 1.9.2 « The Mighty Nice Blog</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-17609">
			November 16, 2010 at 4:20 pm</a>		</div>

		<p>[...] I want to drop use of the Jrails plugin&nbsp;and harness unobtrusive JavaScript [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=17609#respond" onclick='return addComment.moveForm("comment-17609", "17609", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-odd thread-alt depth-1 parent" id="comment-17704">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/a7baeb0c45e5dbaac5bc496f2380061f.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://source.mihelac.org/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','source.mihelac.org']);" rel="external nofollow" class="url">bmihelac</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-17704">
			November 18, 2010 at 12:36 pm</a>		</div>

		<p>Notice problem with handling remote form example:</p>
<p>$(“#tool-form”).bind(“ajax:success”, function(data, status, xhr) {<br>
  $(“#response”).html(status);<br>
});</p>
<p>this anonymous function will receive 4 arguments indeed, first being ‘event’, so proper code should be:</p>
<p>$(“#tool-form”).bind(“ajax:success”, function(event, data, status, xhr) {<br>
  $(“#response”).html(data);<br>
});</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=17704#respond" onclick='return addComment.moveForm("comment-17704", "17704", "respond", "1105")'>Reply</a>		</div>
				<div class="comment byuser comment-author-weppos bypostauthor odd alt depth-2 parent" id="comment-17708">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-17708">
			November 18, 2010 at 1:30 pm</a>		</div>

		<p>Are you sure of this?<br>
See <a href="https://github.com/rails/jquery-ujs/blob/4ece456c505b6929cde996100770a67b1a805cfc/src/rails.js#L59-61" onclick="javascript:_gaq.push(['_trackEvent','outbound-comment','github.com']);" rel="nofollow">https://github.com/rails/jquery-ujs/blob/4ece456c505b6929cde996100770a67b1a805cfc/src/rails.js#L59-61</a></p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=17708#respond" onclick='return addComment.moveForm("comment-17708", "17708", "respond", "1105")'>Reply</a>		</div>
				<div class="comment even depth-3" id="comment-17713">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/a7baeb0c45e5dbaac5bc496f2380061f.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://source.mihelac.org/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','source.mihelac.org']);" rel="external nofollow" class="url">bmihelac</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-17713">
			November 18, 2010 at 7:24 pm</a>		</div>

		<p>Yes, I am. When event is triggered from rails.js, JQuery would take
 that event and dispatch it to registered listeners, in this case our 
anonymous function with event as first param. </p>
<p>This is from JQuery .bind() documentation:<br>
&gt;&gt; The handler callback function can also take parameters. When 
the function is called, the JavaScript event object will be passed to 
the first parameter. </p>
<p>Also, it makes more sense returned data to be in named data rather then status :)</p>
<p>regards,<br>
Bojan</p>

		<div class="reply">
				</div>
		</div>
</div>
</div>
		<div class="comment odd alt thread-even depth-1" id="comment-18854">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/6a3e759cab9085eabed60b8bacc216ad.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">ming yeow</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-18854">
			December 6, 2010 at 2:25 pm</a>		</div>

		<p>Hi there! There seems to be a bit of confusion:</p>
<p>    .bind(‘ajax:before’, function(){  … } )  =&gt; this is for BEFORE execution<br>
    .bind(‘ajax:loading’, function(){  … } )  =&gt; this is for WAITING for execution</p>
<p>Also, how do we refer to the actual event at any given point in time of the execution?</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=18854#respond" onclick='return addComment.moveForm("comment-18854", "18854", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-odd thread-alt depth-1 parent" id="comment-18986">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/51a224bc83750d654f6d102c2055449b.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://coreyward.net/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','coreyward.net']);" rel="external nofollow" class="url">Corey</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-18986">
			December 8, 2010 at 4:07 am</a>		</div>

		<p>It’s already in the comments, but it appears it hasn’t yet been 
taken into account by Simone yet so here it is again in hopes that it’ll
 be resolved:</p>
<p>The correct callback arguments should read `event, data, status, 
xhr`, then you can call `$(‘#response’).html(data);` as expected.</p>
<p>I was having trouble with this until I checked the jQuery API docs 
that clearly state that callbacks triggered with `.trigger()` get the 
event passed as the first parameter, regardless of whether or not you 
specify additional parameters via the second argument (to the trigger 
method, that is).</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=18986#respond" onclick='return addComment.moveForm("comment-18986", "18986", "respond", "1105")'>Reply</a>		</div>
				<div class="comment byuser comment-author-weppos bypostauthor odd alt depth-2" id="comment-19008">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/99e0b39c091e10d9c7d4452a34ca52dc.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-19008">
			December 8, 2010 at 8:57 am</a>		</div>

		<p>Thanks Corey. I finally had the time to update the article with all the comments posted so far. :)</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=19008#respond" onclick='return addComment.moveForm("comment-19008", "19008", "respond", "1105")'>Reply</a>		</div>
		</div>
</div>
		<div class="comment even thread-even depth-1" id="comment-20521">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/7d08c6d4d38ffe2537c30a627a07ce3f.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn"><a href="http://www.jonathanspooner.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-commentauthor','www.jonathanspooner.com']);" rel="external nofollow" class="url">Jonathan Spooner</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-20521">
			December 25, 2010 at 8:19 pm</a>		</div>

		<p>Very nice article!  Thanks</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=20521#respond" onclick='return addComment.moveForm("comment-20521", "20521", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment odd alt thread-odd thread-alt depth-1" id="comment-22553">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/c699ac9730a9639de14f1794cbd112c5.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Mark Clark</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-22553">
			January 19, 2011 at 4:59 pm</a>		</div>

		<p>Thanks for your tutorial. I have a question about repeatedly 
updating a that is not in a form by using jquery and unobtrusive 
javascript. I want to update a progress bar to inform the user the 
status of a long process (the process is not files uploading). I loop 
through several tasks in a controller and would like to update the 
progress bar after each task is executed in the loop. What code should I
 add to the controller to refresh the call the javascript and refresh 
the view ?</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=22553#respond" onclick='return addComment.moveForm("comment-22553", "22553", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-even depth-1" id="comment-25323">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/5322cde2e4a165c3d0dce5260574f1c9.png" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">murato</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-25323">
			February 18, 2011 at 10:26 pm</a>		</div>

		<p>Hi, great article.<br>
I have a one question. Why ‘ajax:success’ callback can be invoked two times?</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=25323#respond" onclick='return addComment.moveForm("comment-25323", "25323", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="pingback odd alt thread-odd thread-alt depth-1" id="comment-27418">
				<div class="comment-author vcard">
				<cite class="fn"><a href="http://www.simonecarletti.com/blog/2011/03/book-review-html-5-up-and-running/" rel="external nofollow" class="url">Book Review: HTML 5 Up and Running – Simone Carletti's Blog</a></cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-27418">
			March 10, 2011 at 12:22 pm</a>		</div>

		<p>[...] parsley stands to kitchen. You find it almost everywhere. 
Think about jQuery Mobile, Sencha Touch, unobtrusive Rails 3 helpers, 
Cappucino, HTML 5 Modernizr library, etc. these are just a few examples 
of how JavaScript is [...]</p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=27418#respond" onclick='return addComment.moveForm("comment-27418", "27418", "respond", "1105")'>Reply</a>		</div>
		</div>
		<div class="comment even thread-even depth-1" id="comment-30513">
				<div class="comment-author vcard">
		<img alt="" src="form_remote_tag_for_rails3-1_files/53edc75ded0cb864f567e02212195de0.jpeg" class="avatar avatar-32 photo" width="32" height="32">		<cite class="fn">Dominic</cite> <span class="says">says:</span>		</div>

		<div class="comment-meta commentmetadata"><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-30513">
			April 26, 2011 at 5:21 pm</a>		</div>

		<p>According to this pull request, ajax:loading has been replaced with
 ajax:beforeSend, and a few other callbacks have been trimmed:<br>
<a href="https://github.com/rails/jquery-ujs/pull/56" onclick="javascript:_gaq.push(['_trackEvent','outbound-comment','github.com']);" rel="nofollow">https://github.com/rails/jquery-ujs/pull/56</a></p>

		<div class="reply">
		<a class="comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/?replytocom=30513#respond" onclick='return addComment.moveForm("comment-30513", "30513", "respond", "1105")'>Reply</a>		</div>
		</div>
  </div>

  <div class="navigation">
    <div class="alignleft"></div>
    <div class="alignright"></div>
  </div>
 


<div id="respond">

  <h3>Add a Comment</h3>

  <div class="cancel-comment-reply">
    <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#respond" style="display: none;">Click here to cancel reply.</a></small>
  </div>

  
<form action="http://www.simonecarletti.com/blog/wp-comments-post.php" method="post" id="commentform">

    <p>
    <label for="author">Name (required)</label><br>
    <input name="author" id="author" size="22" tabindex="1" aria-required="true" type="text">
  </p>
  <p>
    <label for="email">Mail (will not be published) (required)</label><br>
    <input name="email" id="email" size="22" tabindex="2" aria-required="true" type="text">
  </p>
  <p>
    <label for="url">Website</label><br>
    <input name="url" id="url" size="22" tabindex="3" type="text">
  </p>
  
<!--<p><small><strong>XHTML:</strong> You can use these tags: <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; &lt;pre lang=&quot;&quot; line=&quot;&quot; escaped=&quot;&quot;&gt; </code></small></p>-->

  <p>
    <textarea name="comment" id="comment" cols="100%" rows="10" tabindex="4"></textarea>
  </p>

  <p>
    <input name="submit" id="submit" tabindex="5" value="Submit" type="submit">
    <input name="comment_post_ID" value="1105" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
  </p>

  <p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="11b0ebf105" type="hidden"></p>
</form>

</div>



    </div>
    <div class="grid_4">
      <div id="sidebar" role="complementary">
  <div id="search-3" class="widget widget_search"><form role="search" method="get" id="searchform" action="http://www.simonecarletti.com/blog/">
<div>
  <input name="s" id="s" style="width: 70%;" type="text">
  <input id="searchsubmit" value="Search" style="width: 25%;" type="submit">
</div>
</form></div><div id="text-316128859" class="widget widget_text">			<div class="textwidget"><div style="background-color: rgb(255, 255, 204); border: 1px solid rgb(255, 255, 0); padding: 1em;"><p><a href="http://www.robodomain.com/?utm_source=simonecarletti.com&amp;utm_medium=banner&amp;utm_content=sidebar-single&amp;utm_campaign=robodomain" title="RoboDomain"><img src="form_remote_tag_for_rails3-1_files/robodomain-icon.png" alt="RoboDomain" class="alignleft">
<h3>RoboDomain</h3>
Track and manage your domains in one single place: log transactions, add notes and more</a></p>
</div></div>
		</div><div id="text-316128860" class="widget widget_text"><h6 class="widgettitle">Teach Me</h6>			<div class="textwidget"><p>As
 you might know (or have figured out by reading this website), I am not a
 native English speaker. If you spot an error, or if you think that 
something can be expressed in a better way, please <a href="mailto:%73%69%6d%6f%6e%65+%65%6e%67%6c%69%73%68@%63%61%72%6c%65%74%74%69.%6e%61%6d%65">let me know</a> so that I can fix the issue and learn from my mistakes.</p></div>
		</div><div id="text-316128861" class="widget widget_text"><h6 class="widgettitle">Hire Me</h6>			<div class="textwidget"><p>I'm currently available for consulting, development or speech opportunities. I prefer short, catchy projects. Feel free to <a href="mailto:%73%69%6d%6f%6e%65@%63%61%72%6c%65%74%74%69.%6e%61%6d%65">email me</a> if you'd like to hire me or just get in touch.</p></div>
		</div>      <div id="weppos_summary_widget-4" class="widget widget-weppos-summary">        <h6 class="widgettitle">Subscribe</h6>        <ul class="subscribe">
          <li class="feed"><a href="http://www.simonecarletti.com/blog/feed/">Subscribe via RSS</a></li>
          <li class="twitter"><a href="http://twitter.com/weppos">Follow on Twitter</a></li>
        </ul>
      </div>    <!-- Wordpress Popular Posts Plugin v2.1.4 [W] [monthly] [regular] -->
<div id="wpp-3" class="widget popular-posts">
<h6 class="widgettitle">Popular Posts</h6><ul>
<li><a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/" title="Unobtrusive JavaScript in Rails 3"><span class="wpp-post-title">Unobtrusive JavaScript in Rails 3</span></a> </li>
<li><a href="http://www.simonecarletti.com/blog/2010/04/inside-ruby-on-rails-serializing-ruby-objects-with-json/" title="Understanding Ruby and Rails: Serializing Ruby objects with JSON"><span class="wpp-post-title">Understanding Ruby and Rails: Serializing Ruby objects with JSON</span></a> </li>
<li><a href="http://www.simonecarletti.com/blog/2011/04/understanding-ruby-and-rails-lazy-load-hooks/" title="Understanding Ruby and Rails: Lazy load hooks"><span class="wpp-post-title">Understanding Ruby and Rails: Lazy load hooks</span></a> </li>
<li><a href="http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/" title="Apache RewriteRule and query string"><span class="wpp-post-title">Apache RewriteRule and query string</span></a> </li>
<li><a href="http://www.simonecarletti.com/blog/2009/06/capistrano-and-database-yml/" title="Capistrano and database.yml"><span class="wpp-post-title">Capistrano and database.yml</span></a> </li>

</ul>
</div>
<!-- End Wordpress Popular Posts Plugin v2.1.4 -->
 
  </div>

    </div>
  </div>

  <div class="wrap">
    <div id="prefooter" class="container_12 clearfix">
                  <div id="widget-weppos-aboutme" class="grid_4">
        <h6>Follow Me</h6>
        <ul id="twitter_update_list"><li><span>Configuring Rails 3 to use HTTPS and SSL <a href="http://t.co/bZRixJH">http://t.co/bZRixJH</a> #rails #ruby #https</span> <a style="font-size: 85%;" href="http://twitter.com/weppos/statuses/66106697730633728">5 minutes ago</a></li><li><span>@<a href="http://twitter.com/apeacox">apeacox</a> Oops, yes. :D</span> <a style="font-size: 85%;" href="http://twitter.com/weppos/statuses/66081762836611072">about an hour ago</a></li><li><span>In Rails 3.1 you can enable a HTTPS-only application with a single configuration line <a href="http://goo.gl/JKOru">http://goo.gl/JKOru</a> Pretty cool.</span> <a style="font-size: 85%;" href="http://twitter.com/weppos/statuses/66081311709872128">about an hour ago</a></li></ul>
        <script type="text/javascript" src="form_remote_tag_for_rails3-1_files/blogger.js"></script>
        <script type="text/javascript" src="form_remote_tag_for_rails3-1_files/weppos.json"></script>
      </div>
            <div id="recent-comments-3" class="widget widget_recent_comments grid_4"><h6 class="widgettitle">Recent Comments</h6><ul id="recentcomments"><li class="recentcomments"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a> on <a href="http://www.simonecarletti.com/blog/2011/04/understanding-ruby-and-rails-lazy-load-hooks/#comment-30674">Understanding Ruby and Rails: Lazy load hooks</a></li><li class="recentcomments">Dominic on <a href="http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/#comment-30513">Unobtrusive JavaScript in Rails 3</a></li><li class="recentcomments">Steven Shankle on <a href="http://www.simonecarletti.com/blog/2011/04/understanding-ruby-and-rails-lazy-load-hooks/#comment-30417">Understanding Ruby and Rails: Lazy load hooks</a></li><li class="recentcomments"><a href="http://www.simonecarletti.com/" rel="external nofollow" class="url">Simone Carletti</a> on <a href="http://www.simonecarletti.com/blog/2011/04/rspec-rails-doesnt-render-rails-views-by-default/#comment-30107">RSpec Rails doesn’t render Rails views by default</a></li><li class="recentcomments">Rob on <a href="http://www.simonecarletti.com/blog/2011/04/rspec-rails-doesnt-render-rails-views-by-default/#comment-30089">RSpec Rails doesn’t render Rails views by default</a></li></ul></div>            <div id="widget-quotes" class="grid_4">
        <h6>Random Quote</h6>
        <div id="randomquote" class="clearfix"><blockquote>
  <p>But.. if facebook dies, how will we find quasi-friends from high school, friend them, and continue to not talk to them? *q:=</p>
</blockquote>
<div class="meta alignleft">
  <a href="http://www.simonecarletti.com/quotes/4d6a8cd00d52b077e7000054" title="But.. if facebook dies, how will we find quasi-friends from high school, friend them, and continue to not talk to them? *q:=">permalink</a> •
  <a href="http://twitter.com/home?status=But..%20if%20facebook%20dies,%20how%20will%20we%20find%20quasi-friends%20from%20high%20school,%20fri...%20http://www.simonecarletti.com/quotes/4d6a8cd00d52b077e7000054">tweet this</a>
</div>
<div class="author alignright">
  — Brian Welch
</div>
</div>
      </div>
          </div>
  </div>

  <div id="footer" class="container_12 clearfix">
    <div id="copy">
      Copyright © 2003-2011 Simone Carletti, All Rights Reserved<br>
      Content on this blog is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Creative Commons</a> license.
    </div>
  </div>

  		<!-- Advertising Manager v3.4.19 (0.405 seconds.) -->
<!-- Dynamic page generated in 0.398 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-05-05 13:21:53 -->
<!-- Compression = gzip --></body></html>